<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能健身倒计时</title>
    <!-- PWA配置 -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563EB">
    <!-- 苹果设备支持 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="https://clockcn.com/favicon.ico">
    <link rel="icon" href="https://clockcn.com/favicon.ico" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563EB',
                        workout: '#059669',
                        rest: '#D97706',
                        dark: '#111827',
                        light: '#F3F4F6'
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        .timer-pulse { animation: none; }
        @keyframes pulse { 50% { transform: scale(1.08); } }
        .final-countdown { animation: finalCountdown 1s ease-in-out infinite; }
        @keyframes finalCountdown { 50% { transform: scale(1.15); opacity: 0.9; } }
        .card-shadow { box-shadow: 0 12px 30px -8px rgba(0,0,0,0.1); }
        .status-badge { transition: all 0.3s ease; }
        /* 按钮交互动画 */
        .btn-click { transition: all 0.15s ease; }
        .btn-click:active {
            transform: scale(0.95);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .btn-bounce {
            animation: bounce 0.3s ease;
        }
        @keyframes bounce {
            0% { transform: scale(1); }
            50% { transform: scale(0.95); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="font-inter bg-gradient-to-br from-light to-slate-100 min-h-screen flex items-center justify-center p-4 text-dark">
    <div class="max-w-2xl w-full">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-extrabold text-primary mb-3">训练助手</h1>
            <p class="text-slate-600">循环训练模式（共4轮）</p>
            <!-- 功能切换标签 -->
            <div class="flex justify-center mt-6 border-b border-slate-200 max-w-md mx-auto">
                <button id="workout-tab" class="px-6 py-2 font-medium text-primary border-b-2 border-primary">锻炼模式</button>
                <button id="timer-tab" class="px-6 py-2 font-medium text-slate-500 hover:text-slate-700">独立计时</button>
            </div>
        </div>
        <div id="workout-mode" class="block mb-8">
        <div id="timer-card" class="bg-white/90 backdrop-blur-lg rounded-3xl p-10 card-shadow">
            <div class="flex flex-col gap-4 mb-6">
                <div class="text-center status-badge">
                    <span id="cycle-counter" class="px-5 py-2 rounded-full bg-primary/10 text-primary font-semibold text-lg">循环 1/4</span>
                </div>
                <div class="text-center">
                    <h2 id="status-text" class="text-2xl font-bold text-workout">准备开始训练</h2>
                </div>
            </div>
            <div class="text-center mb-10">
                <div id="display-area" class="text-[3rem] font-black text-workout timer-pulse">点击开始</div>
              </div>
            <div class="flex flex-col gap-3 max-w-sm mx-auto">
                <button id="start-btn" class="bg-primary hover:bg-primary/90 text-white py-4 rounded-full flex items-center justify-center gap-2 btn-click">
                    <i class="fa fa-play fa-lg"></i>
                    <span class="text-lg font-medium">开始训练</span>
                </button>
                <button id="reset-btn" class="bg-slate-200 hover:bg-slate-300 text-slate-800 py-4 rounded-full flex items-center justify-center gap-2 btn-click">
                    <i class="fa fa-refresh fa-lg"></i>
                    <span class="text-lg font-medium">重置训练</span>
                </button>
            </div>
            <div id="message" class="mt-6 text-center text-slate-600 text-base">提示：可使用空格键控制开始/完成，R键重置</div>
        </div>
    </div>
    <!-- 独立计时模式 - 保留一个并修复结构 -->
    <div id="timer-mode" class="hidden mb-8">
        <div class="bg-white/90 backdrop-blur-lg rounded-3xl p-10 card-shadow max-w-md mx-auto w-full">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold text-primary mb-3">独立计时器</h2>
                <p class="text-slate-600">自定义倒计时时间</p>
            </div>
            <div class="flex flex-col items-center gap-6 mb-8">
                <div class="w-full max-w-xs">
                    <label for="timer-input" class="block text-sm font-medium text-slate-700 mb-1">设置时间（秒）</label>
                    <input type="number" id="timer-input" min="0" value="0" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary text-center text-xl" placeholder="输入秒数(可超过60)">
                <div class="flex gap-4 w-full max-w-xs mt-4">
                    <div class="flex-1">
                        <label for="timer-minutes" class="block text-left text-slate-600 mb-2">分钟</label>
                        <input
                            type="number" id="timer-minutes" min="0" value="0" step="1"
                            class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"
                        >
                    </div>
                    <div class="flex-1">
                        <label for="timer-seconds" class="block text-left text-slate-600 mb-2">秒</label>
                        <input
                            type="number" id="timer-seconds" min="0" max="59" value="0"
                            class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"
                        >
                    </div>
                </div>
                </div>
                <div id="timer-display" class="text-7xl font-black text-primary timer-pulse">00:00</div>
            </div>
            <div class="flex flex-col gap-3 max-w-sm mx-auto">
                <button id="timer-start-btn" class="bg-primary hover:bg-primary/90 text-white py-4 rounded-full flex items-center justify-center gap-2 btn-click">
                    <i class="fa fa-play fa-lg"></i>
                    <span class="text-lg font-medium">开始计时</span>
                </button>
                <button id="timer-reset-btn" class="bg-slate-200 hover:bg-slate-300 text-slate-800 py-4 rounded-full flex items-center justify-center gap-2 btn-click">
                    <i class="fa fa-refresh fa-lg"></i>
                    <span class="text-lg font-medium">重置计时</span>
                </button>
            </div>
            <div id="timer-message" class="mt-6 text-center text-slate-600 text-base">提示：单独设置秒时可超过60秒(会自动转换为分钟)，分和秒都设置时秒限制在0-59之间</div>
        </div>
    </div>
    <script>
        const appState = {
            totalCycles: 4,
            workoutDuration: 60,
            restDuration: 60,
            currentCycle: 1,
            isRunning: false,
            isResting: false,
            timer: null,
            audioInstance: null,
            clickSound: new Audio('down_fail.mp3'),
            seconds: 60
        };

        const dom = {
            startBtn: document.getElementById('start-btn'),
            resetBtn: document.getElementById('reset-btn'),
            displayArea: document.getElementById('display-area'),
            statusText: document.getElementById('status-text'),
            cycleCounter: document.getElementById('cycle-counter'),
            message: document.getElementById('message'),
            timerCard: document.getElementById('timer-card')
        };

        function updateDisplay() {
            if (appState.isResting) {
                const mins = Math.floor(appState.seconds / 60);
                const secs = appState.seconds % 60;
                dom.displayArea.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        dom.displayArea.classList.toggle('final-countdown', appState.seconds <= 10);
        document.title = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')} - 健身倒计时`;
            } else {
                dom.displayArea.textContent = '锻炼中';
        document.title = `锻炼中 - 智能健身倒计时`;
            }
        }

        function updateCycleCounter() {
            dom.cycleCounter.textContent = `循环 ${appState.currentCycle}/${appState.totalCycles}`;
            dom.cycleCounter.classList.toggle('bg-primary/10', !appState.isResting);
            dom.cycleCounter.classList.toggle('bg-rest/10', appState.isResting);
        }

        function startWorkout() {
            appState.isRunning = true;
            appState.isResting = false;
            dom.statusText.textContent = '锻炼进行中';
            dom.statusText.classList = 'text-2xl font-bold text-workout';
            dom.displayArea.textContent = '锻炼中';
            dom.displayArea.classList = 'text-7xl font-black text-workout timer-pulse';
            dom.timerCard.classList = 'bg-white/90 backdrop-blur-lg rounded-3xl p-10 card-shadow border-2 border-workout/20';
            dom.message.textContent = '专注锻炼，完成后点击按钮进入休息';
            dom.startBtn.innerHTML = '<i class="fa fa-flag-checkered fa-lg"></i><span class="text-lg font-medium">完成锻炼</span>';
            updateCycleCounter();

            // 锻炼阶段不启用倒计时，由用户主动点击完成
            if (appState.timer) clearInterval(appState.timer);
        }
        


        function switchToRest() {
            appState.isRunning = false;
            appState.isResting = true;
            // 前3次休息60秒，第4次休息90秒
            appState.seconds = appState.currentCycle === 4 ? 90 : 60;
            dom.statusText.textContent = '休息恢复中';
            dom.statusText.classList = 'text-2xl font-bold text-rest';
            dom.displayArea.classList = 'text-7xl font-black text-rest timer-pulse';
            dom.timerCard.classList = 'bg-white/90 backdrop-blur-lg rounded-3xl p-10 card-shadow border-2 border-rest/20';
            dom.message.textContent = '适当休息，准备下一轮训练';
            dom.startBtn.innerHTML = '<i class="fa fa-clock-o fa-lg"></i><span class="text-lg font-medium">休息计时中</span>';
            dom.startBtn.disabled = true;

            appState.timer = setInterval(() => {
                if (appState.seconds <= 0) {
                    clearInterval(appState.timer);
                    // 创建循环音频实例并播放 - 使用在线MP3
    appState.audioInstance = new Audio('https://clockcn.com/sound/xylophone.mp3');
    appState.audioInstance.loop = true;
    appState.audioInstance.play();
                    handleCycleCompletion();
                    return;
                }
                appState.seconds--;
                updateDisplay();
            }, 1000);
        }

        function handleCycleCompletion() {
            if (appState.currentCycle < appState.totalCycles) {
                appState.currentCycle++;
                dom.statusText.textContent = '休息结束';
                dom.displayArea.textContent = '点击开始';
                dom.displayArea.classList = 'text-7xl font-black text-workout';
                dom.message.textContent = '已完成当前轮次，点击开始下一轮训练';
                dom.startBtn.innerHTML = '<i class="fa fa-play fa-lg"></i><span class="text-lg font-medium">开始下一轮</span>';
                dom.startBtn.disabled = false;
                appState.isRunning = false;
                appState.isResting = false;
            } else {
                completeAllCycles();
            }
        }

        function completeAllCycles() {
            clearInterval(appState.timer);
            appState.isRunning = false;
            appState.isResting = false;
            dom.statusText.textContent = '训练完成！';
            dom.statusText.classList = 'text-2xl font-bold text-primary';
            dom.displayArea.textContent = '恭喜完成';
            dom.displayArea.classList = 'text-7xl font-black text-primary';
            dom.timerCard.classList = 'bg-white/90 backdrop-blur-lg rounded-3xl p-10 card-shadow border-2 border-primary/20';
            dom.message.textContent = '您已完成所有3轮科学训练，今天的锻炼很出色！';
            dom.startBtn.innerHTML = '<i class="fa fa-play fa-lg"></i><span class="text-lg font-medium">重新开始训练</span>';
            dom.startBtn.disabled = false;
            appState.currentCycle = 1;
            updateCycleCounter();
        }

        function resetApp() {
            clearInterval(appState.timer);
            // 停止当前播放的音频
            if (appState.audioInstance) {
                appState.audioInstance.pause();
                appState.audioInstance = null;
            }
            appState.currentCycle = 1;
            appState.isRunning = false;
            appState.isResting = false;
            appState.seconds = appState.workoutDuration;
            dom.displayArea.textContent = '点击开始';
            dom.displayArea.classList = 'text-7xl font-black text-workout';
            dom.statusText.textContent = '准备开始训练';
            dom.statusText.classList = 'text-2xl font-bold text-workout';
            dom.timerCard.classList = 'bg-white/90 backdrop-blur-lg rounded-3xl p-10 card-shadow';
            dom.startBtn.innerHTML = '<i class="fa fa-play fa-lg"></i><span class="text-lg font-medium">开始训练</span>';
            dom.startBtn.disabled = false;
            dom.message.textContent = '提示：可使用空格键控制开始/完成，R键重置';
            updateCycleCounter();
        }

        dom.startBtn.addEventListener('click', () => {
            // 播放点击声音
            appState.clickSound.currentTime = 0;
            appState.clickSound.play();
            
            // 添加按钮动画
            dom.startBtn.classList.add('btn-bounce');
            setTimeout(() => {
                dom.startBtn.classList.remove('btn-bounce');
            }, 300);
            
            if (!appState.isRunning && !appState.isResting) {
                // 停止当前播放的音频
                if (appState.audioInstance) {
                    appState.audioInstance.pause();
                    appState.audioInstance = null;
                }
                startWorkout();
            } else if (appState.isRunning && !appState.isResting) {
                clearInterval(appState.timer);
                switchToRest();
            }
        });

        dom.resetBtn.addEventListener('click', () => {
            // 播放点击声音
            appState.clickSound.currentTime = 0;
            appState.clickSound.play();
            
            // 添加按钮动画
            dom.resetBtn.classList.add('btn-bounce');
            setTimeout(() => {
                dom.resetBtn.classList.remove('btn-bounce');
            }, 300);
            
            resetApp();
        });

        // 独立计时器状态
        const timerState = {
            isRunning: false,
            minutes: 0,
            seconds: 0,
            timer: null,
            endSound: null
        };

        // 初始化音频对象
        function initTimerAudio() {
            if (!timerState.endSound) {
                timerState.endSound = new Audio('https://clockcn.com/sound/xylophone.mp3');
                timerState.endSound.loop = true; // 设置循环播放
                timerState.endSound.addEventListener('error', function() {
                    console.error('无法加载倒计时结束声音');
                    timerDom.timerMessage.textContent = '提示：无法加载倒计时结束声音';
                });
            }
        }

        // 声明全局变量
        let timerDom = null;
        let updateTimerDisplay = null;
        let startTimer = null;
        let resetTimer = null;
        let switchMode = null;

        // 确保DOM加载完成后再获取元素
        document.addEventListener('DOMContentLoaded', function() {
            // 独立计时器DOM元素
            timerDom = {
                workoutTab: document.getElementById('workout-tab'),
                timerTab: document.getElementById('timer-tab'),
                workoutMode: document.getElementById('workout-mode'),
                timerMode: document.getElementById('timer-mode'),
                timerMinutes: document.getElementById('timer-minutes'),
                timerSeconds: document.getElementById('timer-seconds'),
                timerDisplay: document.getElementById('timer-display'),
                timerStartBtn: document.getElementById('timer-start-btn'),
                timerResetBtn: document.getElementById('timer-reset-btn'),
                timerMessage: document.getElementById('timer-message'),
                timerInput: document.getElementById('timer-input')
            };

            // 更新独立计时器显示
            updateTimerDisplay = function() {
                if (timerDom && timerDom.timerDisplay) {
                    timerDom.timerDisplay.textContent = `${timerState.minutes.toString().padStart(2, '0')}:${timerState.seconds.toString().padStart(2, '0')}`;
                    timerDom.timerDisplay.classList.toggle('final-countdown', timerState.minutes === 0 && timerState.seconds <= 10);
                    document.title = `倒计时 ${timerState.minutes.toString().padStart(2, '0')}:${timerState.seconds.toString().padStart(2, '0')}`;
                }
            };

            // 开始独立计时
            startTimer = function() {
                if (!timerDom) return;
                
                if (timerState.isRunning) {
                    // 暂停计时
                    clearInterval(timerState.timer);
                    timerState.isRunning = false;
                    timerDom.timerStartBtn.innerHTML = '<i class="fa fa-play fa-lg"></i><span class="text-lg font-medium">继续计时</span>';
                    timerDom.timerMessage.textContent = '计时已暂停，点击继续';
                    return;
                }

                // 开始或继续计时
                timerState.isRunning = true;
                timerDom.timerStartBtn.innerHTML = '<i class="fa fa-pause fa-lg"></i><span class="text-lg font-medium">暂停计时</span>';
                timerDom.timerMessage.textContent = '计时进行中...';
                timerDom.timerMinutes.disabled = true;
                timerDom.timerSeconds.disabled = true;
                timerDom.timerInput.disabled = true;

                // 初始化音频（确保在用户交互上下文中）
                initTimerAudio();

                // 播放点击声音
                appState.clickSound.currentTime = 0;
                appState.clickSound.play();
                timerDom.timerStartBtn.classList.add('btn-bounce');
                setTimeout(() => {
                    timerDom.timerStartBtn.classList.remove('btn-bounce');
                }, 300);

                timerState.timer = setInterval(() => {
                    if (timerState.minutes === 0 && timerState.seconds <= 0) {
                        clearInterval(timerState.timer);
                        timerState.isRunning = false;
                        timerDom.timerStartBtn.innerHTML = '<i class="fa fa-play fa-lg"></i><span class="text-lg font-medium">重新开始</span>';
                        timerDom.timerMessage.textContent = '倒计时结束！';
                        timerDom.timerMinutes.disabled = false;
                        timerDom.timerSeconds.disabled = false;
                        timerDom.timerInput.disabled = false;

                        // 播放结束声音
                        initTimerAudio();
                        if (timerState.endSound) {
                            timerState.endSound.currentTime = 0;
                            // 确保在用户交互上下文中播放音频
                            timerState.endSound.play().catch(error => {
                                console.error('播放失败:', error);
                                timerDom.timerMessage.textContent = '倒计时结束！(声音播放失败)';
                            });
                        } else {
                            timerDom.timerMessage.textContent = '倒计时结束！(无法播放声音)';
                        }
                        return;
                    }
                    if (timerState.seconds <= 0) {
                        if (timerState.minutes > 0) {
                            timerState.minutes--;
                            timerState.seconds = 59;
                        }
                    } else {
                        timerState.seconds--;
                    }
                    updateTimerDisplay();
                }, 1000);
            };

            // 重置独立计时器
            resetTimer = function() {
                if (!timerDom) return;
                
                clearInterval(timerState.timer);
                timerState.isRunning = false;
                // 重置为0分0秒
                timerState.minutes = 0;
                timerState.seconds = 0;
                // 更新输入框值
                timerDom.timerMinutes.value = 0;
                timerDom.timerSeconds.value = 0;
                timerDom.timerInput.value = 0;
                updateTimerDisplay();
                timerDom.timerStartBtn.innerHTML = '<i class="fa fa-play fa-lg"></i><span class="text-lg font-medium">开始计时</span>';
                timerDom.timerStartBtn.disabled = false;
                timerDom.timerMinutes.disabled = false;
                timerDom.timerSeconds.disabled = false;
                timerDom.timerInput.disabled = false;
                timerDom.timerMessage.textContent = '提示：单独设置秒时可超过60秒(会自动转换为分钟)，分和秒都设置时秒限制在0-59之间';

                // 停止声音
                if (timerState.endSound) {
                    timerState.endSound.pause();
                    timerState.endSound.currentTime = 0;
                }

                // 播放点击声音
                appState.clickSound.currentTime = 0;
                appState.clickSound.play();
                timerDom.timerResetBtn.classList.add('btn-bounce');
                setTimeout(() => {
                    timerDom.timerResetBtn.classList.remove('btn-bounce');
                }, 300);
            };

            // 切换模式
            switchMode = function(mode) {
                if (!timerDom) return;
                
                if (mode === 'workout') {
                    timerDom.workoutMode.classList.remove('hidden');
                    timerDom.workoutMode.classList.add('block');
                    timerDom.timerMode.classList.remove('block');
                    timerDom.timerMode.classList.add('hidden');
                    timerDom.workoutTab.classList.add('text-primary', 'border-b-2', 'border-primary');
                    timerDom.workoutTab.classList.remove('text-slate-500');
                    timerDom.timerTab.classList.add('text-slate-500');
                    timerDom.timerTab.classList.remove('text-primary', 'border-b-2', 'border-primary');
                    document.title = '智能健身倒计时';
                } else {
                    timerDom.workoutMode.classList.remove('block');
                    timerDom.workoutMode.classList.add('hidden');
                    timerDom.timerMode.classList.remove('hidden');
                    timerDom.timerMode.classList.add('block');
                    timerDom.workoutTab.classList.add('text-slate-500');
                    timerDom.workoutTab.classList.remove('text-primary', 'border-b-2', 'border-primary');
                    timerDom.timerTab.classList.add('text-primary', 'border-b-2', 'border-primary');
                    timerDom.timerTab.classList.remove('text-slate-500');
                    updateTimerDisplay();
                }
                // 播放点击声音
                appState.clickSound.currentTime = 0;
                appState.clickSound.play();
            };

            // 事件监听
            if (timerDom.workoutTab) {
                timerDom.workoutTab.addEventListener('click', () => switchMode('workout'));
            }
            if (timerDom.timerTab) {
                timerDom.timerTab.addEventListener('click', () => switchMode('timer'));
            }
            if (timerDom.timerStartBtn) {
                timerDom.timerStartBtn.addEventListener('click', startTimer);
            }
            if (timerDom.timerResetBtn) {
                timerDom.timerResetBtn.addEventListener('click', resetTimer);
            }
            if (timerDom.timerMinutes) {
                timerDom.timerMinutes.addEventListener('change', () => {
                    if (!timerState.isRunning) {
                        let minutes = parseInt(timerDom.timerMinutes.value) || 0;
                        minutes = Math.max(0, minutes);
                        timerDom.timerMinutes.value = minutes;
                        timerState.minutes = minutes;
                        // 同步到总秒数输入框
                        timerDom.timerInput.value = minutes * 60 + timerState.seconds;
                        updateTimerDisplay();
                    }
                });
            }
            if (timerDom.timerSeconds) {
                timerDom.timerSeconds.addEventListener('change', () => {
                    if (!timerState.isRunning) {
                        let seconds = parseInt(timerDom.timerSeconds.value) || 0;
                        seconds = Math.max(0, Math.min(59, seconds));
                        timerDom.timerSeconds.value = seconds;
                        timerState.seconds = seconds;
                        // 同步到总秒数输入框
                        timerDom.timerInput.value = timerState.minutes * 60 + seconds;
                        updateTimerDisplay();
                    }
                });
            }

            // 处理秒输入并转换为分钟和秒的函数
            function handleTimerInput() {
                if (!timerState.isRunning && timerDom) {
                    let totalSeconds = parseInt(timerDom.timerInput.value) || 0;
                    totalSeconds = Math.max(0, totalSeconds); // 确保非负
                    
                    // 转换为分钟和秒
                    const minutes = Math.floor(totalSeconds / 60);
                    const seconds = totalSeconds % 60;
                    
                    // 更新状态
                    timerState.minutes = minutes;
                    timerState.seconds = seconds;
                    
                    // 更新输入框
                    timerDom.timerMinutes.value = minutes;
                    timerDom.timerSeconds.value = seconds;
                    
                    // 更新显示
                    updateTimerDisplay();
                }
            }
            
            // 为总秒数输入框添加事件监听
            if (timerDom.timerInput) {
                timerDom.timerInput.addEventListener('change', handleTimerInput);
                timerDom.timerInput.addEventListener('input', handleTimerInput);
            }

            // 初始化独立计时器显示
            updateTimerDisplay();
        });

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                // 只在锻炼模式下响应空格键
                if (!timerDom || timerDom.workoutMode.classList.contains('block')) {
                    dom.startBtn.click();
                }
            }
            if (e.key.toLowerCase() === 'r') {
                e.preventDefault();
                // 根据当前模式重置
                if (timerDom && timerDom.timerMode.classList.contains('block')) {
                    resetTimer();
                } else {
                    dom.resetBtn.click();
                }
            }
        });
    </script>
    <!-- 注册Service Worker -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('service-worker.js')
            .then((registration) => {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
            .catch((error) => {
              console.log('ServiceWorker registration failed: ', error);
            });
        });
      }
    </script>
</body>
</html>
